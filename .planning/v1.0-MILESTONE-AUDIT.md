---
milestone: v1.0
audited: 2026-02-21T19:00:00Z
status: gaps_found
scores:
  requirements: 19/21
  phases: 3/3
  integration: 20/21
  flows: 4/4
gaps:
  requirements:
    - id: "SHELL-03"
      status: "unsatisfied"
      phase: "Phase 1"
      claimed_by_plans: ["01-01-PLAN.md"]
      completed_by_plans: []
      verification_status: "failed"
      evidence: "Phase 1 VERIFICATION.md truth 2 FAILED — togglePopover() uses private KVC key 'statusItem' which may silently return nil. SUMMARY 01-01 confirms 'known issue: not working'. Hotkey registration code exists but toggle mechanism is broken."
    - id: "SHELL-04"
      status: "partial"
      phase: "Phase 1"
      claimed_by_plans: ["01-01-PLAN.md"]
      completed_by_plans: ["01-01-SUMMARY.md"]
      verification_status: "missing"
      evidence: "Not covered by any observable truth in 01-VERIFICATION.md. SUMMARY 01-01 confirms SMAppService.mainApp.register() implemented and launch-at-login working, but no verification truth tested this behavior. Code exists, verification gap only."
  integration:
    - from: "ClipItemStore.init()"
      to: "PopoverContent / ItemRow"
      issue: "store.clipboardObserver is Optional<ClipboardObserver> initialized to nil, set after applicationDidFinishLaunching. Tap-to-copy (PASTE-01) and batch copy button (PASTE-03) silently no-op or don't render during nil window at startup."
      affected_requirements: ["PASTE-01", "PASTE-03"]
      severity: "low"
  flows: []
tech_debt:
  - phase: 01-capture-engine
    items:
      - "Global hotkey toggle uses private KVC key 'statusItem' — fragile, may break across macOS versions"
      - "01-VERIFICATION.md is YAML-only with no expanded requirements table or artifact verification"
  - phase: 03-paste-actions
    items:
      - "ClipItem.Transferable creates ephemeral ImageStore() instance — bypasses shared singleton, isolation gap if path becomes configurable"
      - "store.clipboardObserver is Optional — structural nil window at startup could mask bugs"
  - phase: cross-cutting
    items:
      - "REQUIREMENTS.md traceability table has 17 requirements still marked [ ] Pending despite being satisfied"
      - "No SUMMARY frontmatter includes requirements-completed field (all 5 summaries missing it)"
---

# v1.0 Milestone Audit Report

**Milestone:** v1.0 — Copyhog
**Audited:** 2026-02-21
**Status:** gaps_found
**Score:** 19/21 requirements satisfied

---

## Requirements Coverage (3-Source Cross-Reference)

### Phase 1: Capture Engine (13 requirements)

| Requirement | Description | VERIFICATION | SUMMARY | REQUIREMENTS.md | Final Status |
|-------------|-------------|-------------|---------|-----------------|--------------|
| SHELL-01 | Menu bar hedgehog icon | Truth 1 passed | 01-01: provides icon | `[ ]` Pending | **satisfied** |
| SHELL-02 | Popover ~360x480px | Truth 1 passed | 01-01: provides popover | `[ ]` Pending | **satisfied** |
| SHELL-03 | Global hotkey Shift+Up | Truth 2 **FAILED** | 01-01: "known issue: not working" | `[ ]` Pending | **unsatisfied** |
| SHELL-04 | Launch at login, silent | No truth coverage | 01-01: SMAppService implemented | `[ ]` Pending | **partial** |
| CLIP-01 | Polls changeCount for text | Truth 3 passed | 01-02: 0.5s polling, text | `[ ]` Pending | **satisfied** |
| CLIP-02 | Polls changeCount for images | Truth 3 passed | 01-02: .tiff/.png capture | `[ ]` Pending | **satisfied** |
| CLIP-03 | Images to App Support | Truth 3 passed (implicit) | 01-02: ImageStore path | `[ ]` Pending | **satisfied** |
| SCRN-01 | Watch screenshot dir | Truth 4 passed | 01-02: DispatchSource | `[ ]` Pending | **satisfied** |
| SCRN-02 | Move to ~/Documents/Screenies/ | Truth 4 passed | 01-02: moves to Screenies | `[ ]` Pending | **satisfied** |
| SCRN-03 | Auto-copy screenshot to clipboard | Truth 4 passed | 01-02: copies to clipboard | `[ ]` Pending | **satisfied** |
| STOR-01 | ClipItem model fields | Truth 5 passed (implicit) | 01-02: ClipItem Codable model | `[ ]` Pending | **satisfied** |
| STOR-02 | 20-item cap, auto-purge | Truth 5 passed | 01-02: 20-item cap | `[ ]` Pending | **satisfied** |
| STOR-03 | Persists across restarts | Truth 5 passed | 01-02: JSON persistence | `[ ]` Pending | **satisfied** |

### Phase 2: Browse UI (4 requirements)

| Requirement | Description | VERIFICATION | SUMMARY | REQUIREMENTS.md | Final Status |
|-------------|-------------|-------------|---------|-----------------|--------------|
| UI-01 | Preview pane full-size | SATISFIED | 02-01: PreviewPane | `[ ]` Pending | **satisfied** |
| UI-02 | Item list 64x64 + timestamps | SATISFIED | 02-01: ItemRow 64x64 | `[ ]` Pending | **satisfied** |
| UI-03 | Hover updates preview | SATISFIED | 02-01: hover-driven | `[ ]` Pending | **satisfied** |
| UI-04 | Empty state message | SATISFIED | 02-01: ContentUnavailableView | `[ ]` Pending | **satisfied** |

### Phase 3: Paste Actions (4 requirements)

| Requirement | Description | VERIFICATION | SUMMARY | REQUIREMENTS.md | Final Status |
|-------------|-------------|-------------|---------|-----------------|--------------|
| PASTE-01 | Click to copy | SATISFIED | 03-01: tap-to-copy | `[x]` Complete | **satisfied** |
| PASTE-02 | Multi-select toggle | SATISFIED | 03-01: multi-select | `[x]` Complete | **satisfied** |
| PASTE-03 | Batch copy to pasteboard | SATISFIED | 03-01: batch copy | `[x]` Complete | **satisfied** |
| PASTE-04 | Drag-out via Transferable | SATISFIED | 03-02: drag-out | `[x]` Complete | **satisfied** |

### Orphan Detection

No orphaned requirements. All 21 v1 requirements in the traceability table are assigned to phases and appear in at least one phase's verification or summary.

---

## Phase Verification Summary

| Phase | Status | Score | Gaps |
|-------|--------|-------|------|
| 01 — Capture Engine | gaps_found | 4/5 truths | SHELL-03 hotkey toggle broken |
| 02 — Browse UI | human_needed | 4/4 truths | 4 runtime behaviors need manual testing |
| 03 — Paste Actions | passed | 8/8 truths | None |

---

## Cross-Phase Integration

**Integration checker result:** 20/21 requirement wiring paths confirmed.

### Integration Findings

**1. clipboardObserver nil window (Low severity)**
- `ClipItemStore.clipboardObserver` is `Optional`, initialized to `nil`, set after `applicationDidFinishLaunching`
- Tap-to-copy (PASTE-01) silently no-ops and batch button (PASTE-03) doesn't render during nil window
- Resolves in milliseconds under normal startup
- **Recommendation:** Make `clipboardObserver` non-optional or inject at `ClipItemStore.init()`

**2. Ephemeral ImageStore in Transferable (Design note)**
- `ClipItem.transferRepresentation` creates a fresh `ImageStore()` on every drag
- Functionally correct for v1 (init is lightweight URL construction)
- Creates isolation gap if base directory ever becomes configurable

### E2E Flows

| Flow | Status |
|------|--------|
| Text copied → appears in popover | COMPLETE |
| Screenshot taken → moved to Screenies → appears in popover | COMPLETE |
| Click item → copies to clipboard | COMPLETE (conditional on observer init) |
| Drag item → drops into target app | COMPLETE |

All 4 flows trace end-to-end without breaks under normal conditions.

---

## Tech Debt Summary

### Phase 1: Capture Engine
- Global hotkey uses private KVC key `statusItem` — fragile, may break across macOS versions
- VERIFICATION.md is YAML-only — no expanded requirements table or artifact verification section

### Phase 3: Paste Actions
- `ClipItem.Transferable` creates ephemeral `ImageStore()` — bypasses shared instance
- `store.clipboardObserver` is Optional — structural nil window at startup

### Cross-Cutting
- REQUIREMENTS.md: 17 of 21 requirements still marked `[ ]` Pending despite being satisfied
- All 5 SUMMARY files missing `requirements-completed` frontmatter field

**Total: 6 tech debt items across 3 categories**

---

## Audit Conclusion

19 of 21 requirements are satisfied at code level with verification evidence. 1 requirement is unsatisfied (SHELL-03 — global hotkey broken) and 1 is partial (SHELL-04 — code exists but no verification truth). Cross-phase integration is solid with all 4 E2E flows complete. The milestone has one functional gap (hotkey) that prevents a clean pass.

---

_Audited: 2026-02-21_
_Auditor: Claude (gsd-audit-milestone)_
