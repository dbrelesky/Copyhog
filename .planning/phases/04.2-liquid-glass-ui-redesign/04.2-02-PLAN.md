---
phase: 04.2-liquid-glass-ui-redesign
plan: 02
type: execute
wave: 2
depends_on: ["04.2-01"]
files_modified:
  - Copyhog/Copyhog/Views/ItemRow.swift
  - Copyhog/Copyhog/Views/PopoverContent.swift
autonomous: false
requirements: []

must_haves:
  truths:
    - "Hovering a row shows a soft glow or luminance shift, not a flat gray overlay"
    - "Single-click copy shows a brief checkmark overlay on the row as confirmation"
    - "Empty state displays a custom hedgehog-themed icon that fits the warm glass aesthetic"
    - "Item thumbnails have polished glass-style treatment"
    - "Text and timestamps have appropriate contrast against glass backgrounds"
  artifacts:
    - path: "Copyhog/Copyhog/Views/ItemRow.swift"
      provides: "Glass-styled rows with glow hover, copy confirmation checkmark"
      contains: "checkmark"
    - path: "Copyhog/Copyhog/Views/PopoverContent.swift"
      provides: "Updated empty state with hedgehog-themed icon"
      contains: "pawprint"
  key_links:
    - from: "Copyhog/Copyhog/Views/ItemRow.swift"
      to: "PasteboardWriter"
      via: "copy action triggers checkmark overlay"
      pattern: "PasteboardWriter.write"
    - from: "Copyhog/Copyhog/Views/PopoverContent.swift"
      to: "ContentUnavailableView"
      via: "empty state with hedgehog icon"
      pattern: "ContentUnavailableView"
---

<objective>
Polish item rows with glass hover effects and copy confirmation, and redesign the empty state to match the warm liquid glass aesthetic.

Purpose: Complete the liquid glass redesign by applying interaction polish to the most frequently used elements — item rows and their hover/copy feedback — and ensure the empty state feels warm and on-brand.

Output: Glass-styled item rows with glow hover effect, checkmark copy confirmation overlay, polished thumbnail treatment, warm hedgehog-themed empty state.
</objective>

<execution_context>
@/Users/darrenbrelesky/.claude/get-shit-done/workflows/execute-plan.md
@/Users/darrenbrelesky/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/04.2-liquid-glass-ui-redesign/04.2-CONTEXT.md
@.planning/phases/04.2-liquid-glass-ui-redesign/04.2-01-SUMMARY.md

@Copyhog/Copyhog/Views/ItemRow.swift
@Copyhog/Copyhog/Views/PopoverContent.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Glass item rows with glow hover and copy confirmation</name>
  <files>
    Copyhog/Copyhog/Views/ItemRow.swift
  </files>
  <action>
    **Hover effect — soft glow, not flat overlay:**
    - Replace the current hover background `Color.secondary.opacity(0.1)` with a luminance-shift glow effect.
    - Use `.background(RoundedRectangle(cornerRadius: 8).fill(.white.opacity(hoveredItemID == item.id ? 0.12 : 0)))` for a soft light glow behind the hovered row.
    - Add `.animation(.easeInOut(duration: 0.15), value: hoveredItemID)` to smoothly transition the glow on/off.
    - Increase cornerRadius from 6 to 8 to match the liquid glass aesthetic.

    **Copy confirmation checkmark overlay:**
    - Add `@State private var showCopyConfirmation = false` to ItemRow.
    - After `PasteboardWriter.write(...)` in the tap gesture (non-multi-select branch), set `showCopyConfirmation = true`, then after 0.8 seconds set it back to false using `DispatchQueue.main.asyncAfter`.
    - Overlay a checkmark on the row: `.overlay { if showCopyConfirmation { RoundedRectangle(cornerRadius: 8).fill(.green.opacity(0.15)).overlay { Image(systemName: "checkmark.circle.fill").font(.title2).foregroundStyle(.green) }.transition(.opacity).animation(.easeInOut(duration: 0.2), value: showCopyConfirmation) } }`
    - The checkmark should be quick and non-blocking — do NOT delay the clipboard write. Write first, show overlay after.

    **Thumbnail polish:**
    - For image thumbnails: keep 64x64 rounded rect but increase cornerRadius to 8. Add a very subtle border: `.overlay(RoundedRectangle(cornerRadius: 8).stroke(.white.opacity(0.1), lineWidth: 0.5))` for glass-edge definition.
    - For text/fallback icon thumbnails: replace `Color.secondary.opacity(0.1)` background with `.ultraThinMaterial` for glass consistency. Increase cornerRadius to 8.
    - Use SF Symbol weight `.medium` for the doc.text and photo icons.

    **Text contrast:**
    - Item text: use `.foregroundStyle(.primary)` (default, should already be set).
    - Timestamp: keep `.foregroundStyle(.tertiary)` — it recedes nicely against glass.
    - Multi-select checkbox: use `.foregroundStyle(selectedItems.contains(item.id) ? Color.accentColor : .secondary)` — use system accent color instead of hardcoded .blue.

    **Row padding:**
    - Increase vertical padding from 4 to 6 for more breathing room in the larger popover.
    - Increase horizontal padding from 4 to 6.
  </action>
  <verify>
    Build with `xcodebuild -project Copyhog/Copyhog.xcodeproj -scheme Copyhog -configuration Debug build 2>&1 | tail -5` — expect BUILD SUCCEEDED. Hovering a row shows a soft white glow. Clicking to copy shows a brief green checkmark overlay. Thumbnails have glass treatment.
  </verify>
  <done>
    Item rows have soft glow hover effect (not flat gray), copy confirmation checkmark appears briefly after single-click copy, thumbnails have glass-edge polish, multi-select uses system accent color, row spacing increased for breathing room.
  </done>
</task>

<task type="auto">
  <name>Task 2: Warm hedgehog-themed empty state</name>
  <files>
    Copyhog/Copyhog/Views/PopoverContent.swift
  </files>
  <action>
    Replace the current `ContentUnavailableView("No Clips Yet", systemImage: "clipboard", description: ...)` with a warm, hedgehog-themed empty state that fits the glass aesthetic:

    - Use `ContentUnavailableView` with `systemImage: "pawprint.fill"` (hedgehog-adjacent, warm) or `"leaf.fill"` (cozy, natural) — pick whichever reads best. If "pawprint.fill" is not available in the target macOS version (14.0), use "leaf.fill" as fallback.
    - Title: "No Clips Yet" (keep current).
    - Description: "Copy text or take a screenshot — your hedgehog will keep it safe" (warmer, personality-driven).
    - Apply `.foregroundStyle(.secondary)` to the icon to keep it soft against the glass.
    - The ContentUnavailableView sits within the glass material background already applied in Plan 01, so it should naturally look integrated.

    **List styling for glass:**
    - On the List in PopoverContent, ensure `.listStyle(.plain)` remains but also add `.scrollContentBackground(.hidden)` so the List doesn't paint its own opaque background over the glass material. This is critical — without it, the List will have a white/dark background that breaks the translucency.
  </action>
  <verify>
    Build succeeds. When no items are captured, the empty state shows a hedgehog-themed icon with warm copy. The item list has a transparent scroll background (glass shows through).
  </verify>
  <done>
    Empty state displays a warm hedgehog-themed message with personality. The item list has transparent background so glass material shows through. The entire popover feels cohesive with the liquid glass treatment.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of complete liquid glass redesign</name>
  <files>Copyhog/Copyhog/Views/PopoverContent.swift</files>
  <action>
    Human visual verification of the complete liquid glass redesign. No code changes — verify all visual and interaction changes from Plans 01 and 02.

    What was built:
    1. Translucent glass popover at 400x520
    2. Elevated preview pane with distinct material and shadow
    3. Floating toolbar with no hard dividers
    4. Glow hover effect on item rows
    5. Checkmark copy confirmation overlay
    6. Warm hedgehog-themed empty state
    7. System accent color on interactive elements
    8. Warm tonal feel throughout

    How to verify:
    1. Click the Copyhog menu bar icon — popover should open at ~400x520 with translucent glass background (you should faintly see desktop content through it)
    2. Verify no hard divider lines anywhere — sections separated by material/spacing only
    3. Check preview pane appears elevated/floating above the list (subtle shadow, different material)
    4. Hover over item rows — should see a soft glow/luminance shift, NOT a flat gray overlay
    5. Single-click an item — should see a brief green checkmark overlay confirming the copy
    6. Check toolbar — multi-select button and gear icon should float with no visible bar behind them
    7. Delete all items to see empty state — should show hedgehog-themed icon/message with warm personality
    8. Verify overall feel is warm and friendly, not sterile — slightly warm tones in the glass
    9. Check that buttons/checkboxes use your system accent color (System Settings > Appearance > Accent Color)
  </action>
  <verify>User types "approved" or describes issues to fix</verify>
  <done>Human reviewer confirms the complete liquid glass redesign looks warm, friendly, and cohesive with no visual regressions</done>
</task>

</tasks>

<verification>
1. `xcodebuild -project Copyhog/Copyhog.xcodeproj -scheme Copyhog -configuration Debug build` succeeds
2. Item rows show soft glow on hover, not flat gray
3. Copy confirmation checkmark appears and disappears quickly
4. Empty state has warm hedgehog personality
5. List scroll background is transparent (glass shows through)
6. Human verification confirms the complete visual redesign looks and feels right
</verification>

<success_criteria>
All interaction polish is applied: glow hover, copy confirmation, warm empty state. The human reviewer confirms the complete liquid glass redesign looks warm, friendly, and cohesive. No visual regressions.
</success_criteria>

<output>
After completion, create `.planning/phases/04.2-liquid-glass-ui-redesign/04.2-02-SUMMARY.md`
</output>
