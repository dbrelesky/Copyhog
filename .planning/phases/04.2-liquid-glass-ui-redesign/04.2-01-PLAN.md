---
phase: 04.2-liquid-glass-ui-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Copyhog/Copyhog/CopyhogApp.swift
  - Copyhog/Copyhog/Views/PopoverContent.swift
  - Copyhog/Copyhog/Views/PreviewPane.swift
  - Copyhog/Copyhog/Views/SettingsMenu.swift
autonomous: true
requirements: []

must_haves:
  truths:
    - "Popover is 400x520px with translucent glass background material"
    - "Preview pane appears as an elevated glass layer visually distinct from the list below"
    - "No hard divider lines between sections — material differences create separation"
    - "Toolbar buttons float in the glass with no visible bar or hard borders"
    - "Interactive elements use the system accent color"
    - "Overall feel is warm and friendly, not sterile"
  artifacts:
    - path: "Copyhog/Copyhog/Views/PopoverContent.swift"
      provides: "Glass popover layout with translucent materials, no dividers, floating toolbar"
      contains: ".ultraThinMaterial"
    - path: "Copyhog/Copyhog/Views/PreviewPane.swift"
      provides: "Elevated glass preview pane with distinct material/shadow"
      contains: ".regularMaterial"
    - path: "Copyhog/Copyhog/CopyhogApp.swift"
      provides: "Updated popover frame at 400x520"
      contains: "400"
  key_links:
    - from: "Copyhog/Copyhog/CopyhogApp.swift"
      to: "PopoverContent"
      via: "frame dimensions"
      pattern: "frame.*400.*520"
    - from: "Copyhog/Copyhog/Views/PopoverContent.swift"
      to: "PreviewPane"
      via: "elevated glass layer"
      pattern: "background.*Material"
---

<objective>
Apply Apple's liquid glass aesthetic to the popover shell, preview pane, toolbar, and settings menu.

Purpose: Transform the popover from a flat, utilitarian UI into a warm, translucent glass interface that feels like a cozy hedgehog den — matching the liquid glass trend while keeping Copyhog's personality.

Output: Resized popover (400x520), translucent glass background, elevated preview pane, floating toolbar with no hard dividers, system accent colors on interactive elements, warmer tonal feel.
</objective>

<execution_context>
@/Users/darrenbrelesky/.claude/get-shit-done/workflows/execute-plan.md
@/Users/darrenbrelesky/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/04.2-liquid-glass-ui-redesign/04.2-CONTEXT.md

@Copyhog/Copyhog/CopyhogApp.swift
@Copyhog/Copyhog/Views/PopoverContent.swift
@Copyhog/Copyhog/Views/PreviewPane.swift
@Copyhog/Copyhog/Views/SettingsMenu.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Glass popover shell and floating toolbar</name>
  <files>
    Copyhog/Copyhog/CopyhogApp.swift
    Copyhog/Copyhog/Views/PopoverContent.swift
    Copyhog/Copyhog/Views/SettingsMenu.swift
  </files>
  <action>
    **CopyhogApp.swift:**
    - Change both `.frame(width: 360, height: 480)` references to `.frame(width: 400, height: 520)` — one in MenuBarExtra content, one in PopoverContent if present.

    **PopoverContent.swift:**
    - Update `.frame(width: 360, height: 480)` to `.frame(width: 400, height: 520)`.
    - Remove ALL `Divider()` instances — glass layers and material differences create visual separation per user decision.
    - Add `.background(.ultraThinMaterial)` to the outermost container (the Group or a wrapping ZStack) so the entire popover has a translucent glass background.
    - For the toolbar HStack: remove any visible bar styling. Use `.padding(.horizontal, 12) .padding(.vertical, 6)` for more breathing room. Buttons should float with no background bar.
    - Add subtle warm tint: apply `.background(Color.orange.opacity(0.03))` behind the main VStack to give a barely-perceptible warm tone to the glass (hedgehog den warmth, not sterile Apple gray).
    - Use `.tint(.accentColor)` on the main container so all interactive elements (buttons, toggles) pick up the system accent color.
    - For the Hog Wipe confirmation bar: style it with `.background(.regularMaterial)` and rounded corners (cornerRadius 10) so it appears as a floating glass card rather than a flat strip. Add `.padding(.horizontal, 8)`.

    **SettingsMenu.swift:**
    - No major structural changes. Ensure the gear icon uses `.fontWeight(.medium)` for a slightly heavier presence that reads well against glass.
    - The menu content remains standard — macOS handles Menu styling natively.
  </action>
  <verify>
    Build with `xcodebuild -project Copyhog/Copyhog.xcodeproj -scheme Copyhog -configuration Debug build 2>&1 | tail -5` — expect BUILD SUCCEEDED. Visually: popover should be 400x520, translucent background showing desktop through it, no hard divider lines, toolbar buttons floating in glass.
  </verify>
  <done>
    Popover is 400x520 with translucent glass material. No hard dividers anywhere. Toolbar buttons float freely. Interactive elements use system accent color. Subtle warm tint applied.
  </done>
</task>

<task type="auto">
  <name>Task 2: Elevated glass preview pane</name>
  <files>
    Copyhog/Copyhog/Views/PreviewPane.swift
  </files>
  <action>
    Redesign PreviewPane to appear as an elevated glass layer visually distinct from the list below:

    - Replace `.background(Color(nsColor: .controlBackgroundColor))` with `.background(.regularMaterial)` — a slightly thicker glass material than the popover's ultraThinMaterial, creating visual hierarchy.
    - Add a subtle shadow: `.shadow(color: .black.opacity(0.1), radius: 8, y: 2)` to give the pane a sense of floating above the list.
    - Add rounded corners: wrap the entire preview pane in a `.clipShape(RoundedRectangle(cornerRadius: 12))` and add `.padding(.horizontal, 8) .padding(.top, 8)` in the parent (PopoverContent) to inset the pane from the popover edges, reinforcing the floating card effect.
    - For image content: keep `.resizable().aspectRatio(contentMode: .fit)` but add `.clipShape(RoundedRectangle(cornerRadius: 8))` to the image itself for inner rounding.
    - For text content: use `.font(.body)` with `.foregroundStyle(.primary)` — ensure good contrast against the glass material. Keep the ScrollView but add `.padding(12)`.
    - For the fallback photo icon and nil state: use `.foregroundStyle(.tertiary)` so they recede into the glass.

    In PopoverContent.swift, update the PreviewPane container:
    - Remove any existing Divider() below the preview pane (should already be gone from Task 1).
    - Add `.padding(.horizontal, 8) .padding(.top, 8)` around the PreviewPane frame.
  </action>
  <verify>
    Build succeeds. Preview pane should appear as a raised glass card with a subtle shadow, visually separated from the list area below by material difference alone (no hard lines).
  </verify>
  <done>
    Preview pane renders as an elevated glass layer with regularMaterial background, subtle shadow, rounded corners, and visual depth separation from the item list. Images have inner rounding. Text has good contrast against glass.
  </done>
</task>

</tasks>

<verification>
1. `xcodebuild -project Copyhog/Copyhog.xcodeproj -scheme Copyhog -configuration Debug build` succeeds
2. Popover opens at 400x520 with translucent glass background
3. No hard divider lines visible anywhere in the popover
4. Preview pane appears elevated with distinct material from list area
5. Toolbar buttons float with no visible bar
6. System accent color appears on interactive elements
</verification>

<success_criteria>
The popover has been resized to 400x520 and transformed from a flat UI to a translucent glass aesthetic. The preview pane is an elevated glass card. The toolbar is seamless. No hard dividers exist. The overall tone is warm and friendly.
</success_criteria>

<output>
After completion, create `.planning/phases/04.2-liquid-glass-ui-redesign/04.2-01-SUMMARY.md`
</output>
